<?php
	//TO RUN THIS PAGE:
	//In the browser and with WAMPserver running, go to 'mathrelay3/databaseSetup/databaseHardReset.php'
	print "<h1> THIS PAGE RESETS YOUR DATABASE </h1>";
	print "<p>We hire only the best trolls to do our work, so give us a moment and their make sure everything is as good as new!<p>";

	$con = mysqli_connect('localhost','root','root','mathrelay3');
	if(!$con){
		print "<br> <h1>Our trolls don't know where to look for that database!</h1>";
		print "<br> Make sure that you have a database called EXACTLY 'mathrelay3' by checking the under the 'Database' tab of 'localhost/phpmyadmin'";
		print "<br> Refresh this page once that's been done.";
		mysqli_close($con);
		die();
	}

	//DROP ALL TABLES THAT ARE USED IN THE PROGRAM
	print "<p> We connected to the database, so the trolls will clear all relevant tables from the old one!</p>";
	mysqli_query($con, 'DROP TABLE admin_log,answer_key,relay_options,team_data,user_log');


	//RECREATE ALL THE TABLES THAT ARE USED IN THE PROGRAM
	print "<p> Now that everything's clear, we'll build the new tables! </p>";
	mysqli_query($con, 'SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";');
	mysqli_query($con, 'SET time_zone = "+00:00";');

	mysqli_query($con, 'CREATE TABLE IF NOT EXISTS `admin_log` (
		`team_id` int(8) NOT NULL,
		`timestamp` varchar(35) NOT NULL,
		`question_number` int(8) NOT NULL,
		`award` int(8) NOT NULL,
		`total` int(8) NOT NULL
		) ENGINE=InnoDB DEFAULT CHARSET=latin1;');

	mysqli_query($con, 'CREATE TABLE IF NOT EXISTS `answer_key` (
		  `series_number` int(8) NOT NULL,
		  `level_number` int(8) NOT NULL,
		  `correct_index` int(8) NOT NULL,
		  `choice_2` varchar(32) NOT NULL,
			`choice_1` varchar(32) NOT NULL,
		  `choice_3` varchar(32) NOT NULL,
		  `choice_4` varchar(32) NOT NULL,
		  `choice_5` varchar(32) NOT NULL,
		  `choice_6` varchar(32) NOT NULL
		) ENGINE=InnoDB DEFAULT CHARSET=UTF8;');

	mysqli_query($con, 'CREATE TABLE IF NOT EXISTS `relay_options` (
		  `class` varchar(12) NOT NULL,
		  `name` varchar(24) NOT NULL,
		  `value` varchar(20) NOT NULL
		) ENGINE=InnoDB DEFAULT CHARSET=latin1;');

	mysqli_query($con, 'CREATE TABLE IF NOT EXISTS `team_data` (
		  `team_id` int(8) NOT NULL,
		  `team_nickname` varchar(50) NOT NULL,
		  `password` varchar(8) NOT NULL,
		  `points` int(8) NOT NULL,
		  `rank_freetime` int(8) NOT NULL,
		  `last_checkin_time` int(18) NOT NULL,
		  `last_point` int(18) NOT NULL,
		  `rank_final` int(8) NOT NULL,
		  `history` varchar(150) NOT NULL,
		  `attempts` varchar(150) NOT NULL
		) ENGINE=InnoDB DEFAULT CHARSET=latin1;');

		mysqli_query($con, 'CREATE TABLE IF NOT EXISTS `stat_log` (
			  `team_id` int(8) NOT NULL,
			  `series_number` int(8) NOT NULL,
			  `level_3_result` int(8) NOT NULL,
			  `level_2_result` int(8) NOT NULL,
			  `level_1_result` int(8) NOT NULL,
			  `attempt` int(8) NOT NULL,
				`timesptamp` int(30) NOT NULL
			) ENGINE=InnoDB DEFAULT CHARSET=latin1;');

	//Adds records to the tables, especially configuration infroatmion to relay_options.
	print "<p> Our wonderful trolls will even fill the database with some important information for the teams!</p>";
	mysqli_query($con, "INSERT INTO `team_data` (`team_id`, `team_nickname`, `password`, `points`, `rank_freetime`, `last_checkin_time`, `last_point`, `rank_final`, `history`,`attempts`) VALUES
		(1, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(2, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(3, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(4, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(5, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(6, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(7, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(8, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(9, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0'),
		(10, '', 'AAAAAA', 0, 0, 0, 0, 0, '0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0','0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0');");

	//ADDS RECORDS TO RELAY_OPTIONS
	print "<p> ...and those ever important relay options!";
	mysqli_query($con, "INSERT INTO `relay_options`(`class`, `name`, `value`) VALUES
	('event','currentEvent','none'),
	('event','startTime','0'),
	('event','stopTime','0'),
	('admin','adminPassword','admin'),
	('admin','adminLastAction','0'),
	('display','idColumn','false'),
	('display','nicknameColumn','true'),
	('display','totalPoints','false'),
	('display','level3PointsColumn','true'),
	('display','level2PointsColumn','true'),
	('display','level1PointsColumn','true'),
	('display','numTeams','7'),
	('reset','numTeams','50'),
	('reset','passwordLength','6'),
	('answerkey','numQuestion','40');
	");

	mysqli_query($con, "INSERT INTO `answer_key` (`series_number`, `level_number`, `correct_index`, `choice_2`, `choice_1`, `choice_3`, `choice_4`, `choice_5`, `choice_6`) VALUES
	(1, 1, 1, '26', '-6', '45', '71', '78', '104'),
	(1, 2, 5, '-192', '-288', '-96', '48', '96', '192'),
	(1, 3, 2, 'Quadratic', 'Horizontal', 'Positive', 'Negative', 'Linear', 'Vertical'),
	(2, 1, 2, '12', '-12', '√(194)', '144', '164', '194'),
	(2, 2, 4, '2', '1', '11', '12', '15', 'A'),
	(2, 3, 6, '(-∞,∞)', '[-∞,-12]∪[-12,∞]', '(-∞,12)∪(12,∞)', '[-∞,∞]', '(-∞-12]∪[-12,∞)', '(-∞,-12)∪(-12,∞)'),
	(3, 1, 3, '3.5', '8', '4', '5.75', '6.5', '15.5'),
	(3, 2, 2, '0', '-64', '5', '24', '48', '180'),
	(3, 3, 3, '100', '-11232', '210', '480', '960', '3600'),
	(4, 1, 5, '-6', '-8', '-3', '3', '6', '13'),
	(4, 2, 2, '0', '-24', '24', '48', '96', '120'),
	(4, 3, 4, '1/6', '0', '.33334', '1/3', '2/3', '3'),
	(5, 1, 4, '-7', '-9.5', '-3', '2', '5.5', '13'),
	(5, 2, 5, '-8', '-12', '8/3', '17/6', '8', '12'),
	(5, 3, 1, '-80', '80', '80/3', '85/3', '-120', '120'),
	(6, 1, 5, '3/25', '1/25', '4/25', '1/6', '1/5', '1/4'),
	(6, 2, 5, '-1', '-3', '-1/3', '2/3', '1', '3/2'),
	(6, 3, 2, '10', '-30', '-10/3', '20/3', '-10', '15'),
	(7, 1, 3, '.13', '.013', '13', '41.87', '52', '1300'),
	(7, 2, 1, '58', '46', '104', '4600', '5800', '10400'),
	(7, 3, 3, '65 + 4√(61)', '111 + 4√(107)', '81', '4607 + 4√(4603)', '5807 + 4√(5803)', '10407 + 4√(10403)'),
	(8, 1, 4, '3/2', '1/5', '7/2', '5', '6', '7'),
	(8, 2, 5, 'i^3', '-1', 'i^4', '(i^2)^2', '1', '√(-1)'),
	(8, 3, 2, '8/15', '8/17', '15/17', '17/15', '15/8', '28°'),
	(9, 1, 2, '3', '13/5', '4', '21/5', '5', '75'),
	(9, 2, 5, '0', '-6', '4', '5', '10', '12'),
	(9, 3, 3, '(-5, 5√6)', '(-5, -5√3)', '(-5, 5√3)', '(-3, 3√3)', '(-2, 2√3)', '(3, -3√3)'),
	(10, 1, 6, '-10', '-11', '1', '2', '10', '11'),
	(10, 2, 6, '1/16', '1/32', '1/4', '33/28', '16', '32'),
	(10, 3, 4, '4.171', '2.757', '4.476', '8.952', '17.905', '28.125'),
	(11, 1, 3, '9', '3', '15', '20', '45/2', '135'),
	(11, 2, 4, '-9/2', '-27', '-4', '-3', '-9/5', '3/5'),
	(11, 3, 1, '-2', '0', '2', '-1', '1', '-3'),
	(12, 1, 4, '2', '.5', '45', '50', '90', '100'),
	(12, 2, 4, '.2', '.05', '4.5', '5', '9', '10'),
	(12, 3, 4, '.284', '.258', '.471', '.510', '.800', '1.000'),
	(13, 1, 2, '6', '1/6', '36', '180', '215', '1296'),
	(13, 2, 1, '26.972', '9', '1209', '32373', '46198', '1679589'),
	(13, 3, 3, '0', '-3', '3', '34.771', '179.925', '214.937'),
	(14, 1, 5, '-4', '-6', '-4/5', '4/5', '4', '6'),
	(14, 2, 1, '1', '-5', '-52/25', '10', '11', '15'),
	(14, 3, 4, '11', '0', '16', '19', '21', '29'),
	(15, 1, 1, '2', '1', '3', '4', '5', '6'),
	(15, 2, 1, '75π', '80π', '40π', '90π', '100π', '125π'),
	(15, 3, 1, '2/25', '1/10', '8/75', '75/8', '10', '25/2'),
	(16, 1, 5, '6', '1', '7', '9', '12', '81'),
	(16, 2, 2, '-2', '-81', '3/2', '7/2', '6', '38/3'),
	(16, 3, 5, '-π/4', '-3', '0', '3π/4', '3', '6'),
	(17, 1, 4, '2', '0', '13/2', '7', '21/2', '14'),
	(17, 2, 2, '15', '5', '25', '30', '75', '105'),
	(17, 3, 4, 'π/36', 'π/90', 'π/18', 'π/12', 'π/6', 'π/3'),
	(18, 1, 2, '4', '7/3', '5', '6', '10', '21'),
	(18, 2, 5, '8', '91/30', '12', '17', '22', '63'),
	(18, 3, 5, '21.980', '8.334', '32.970', '46.707', '60.445', '173.091'),
	(19, 1, 3, '130', '40', '140', '150', '160', '184'),
	(19, 2, 3, '12.771', '7.5985', '13.199', '13.610', '14.007', '14.908'),
	(19, 3, 6, '21.662', '20.450', '25.183', '22.659', '16.906', '15.089'),
	(20, 1, 6, '13', '9', '36', '38', '44', '48'),
	(20, 2, 1, '9√(2)', '15', '9', '18', '2√(101)', '81'),
	(20, 3, 3, '9√(2)', '9', '15', '18', '2√(101)', '81'),
	(21, 1, 3, '7', '6', '8', '9', '10', '11'),
	(21, 2, 4, '70', '60', '50', '80', '40', '30'),
	(21, 3, 6, '54.636', '44.346', '35.626', '20.456', '27.774', '68.747'),
	(22, 1, 2, '40', '12', '24', '56', '72', '96'),
	(22, 2, 4, '68', '44', '84', '100', '116', '128'),
	(22, 3, 4, '204', '132', '252', '300', '348', '384'),
	(23, 1, 2, '3', '1', '6', '9', '12', '18'),
	(23, 2, 6, '55', '35', '115', '90', '110', '65'),
	(23, 3, 4, '17/801', '17/810', '34/845', '17/416', '34/605', '17/297'),
	(24, 1, 6, '1/2', '0', '2', '23/4', '88', '8'),
	(24, 2, 2, '13', '12', '14', '21.5', '26', '28'),
	(24, 3, 6, '1/25', '1/26', '1/13', '13', '25', '26'),
	(25, 1, 2, '26', '19', '45', '71', '78', '104'),
	(25, 2, 5, '11', '8', '12', '18', '30', '38'),
	(25, 3, 5, '22', '16', '24', '36', '60', '76'),
	(26, 1, 2, '80', '40', '77.460', '116.619', '130', '160'),
	(26, 2, 3, '12', '9', '13', '15', '16', '18'),
	(26, 3, 3, '297', '290', '300', '305', '308', '314'),
	(27, 1, 3, '4.167', '4', '5', '5.25', '5.4', '6.25'),
	(27, 2, 1, '66.672', '80', '64', '84', '86.4', '100'),
	(27, 3, 3, '540.951', '338.095', '644.512', '661.417', '671.560', '729.036'),
	(28, 1, 5, '0.244', '0.0024', '2.44', '24.4', '244', '2440'),
	(28, 2, 3, '.331', '.033', '4', '33.197', '331.967', '3319.672'),
	(28, 3, 6, '-56.917', '-56.992', '-56.17', '-56', '25.992', '20.25'),
	(29, 1, 2, '30', '15', '45', '60', '90', '150'),
	(29, 2, 2, '8', '4', '12', '16', '24', '40'),
	(29, 3, 2, '-0.609', '-44.609', '43.391', '87.391', '175.391', '351.391'),
	(30, 1, 3, '1440', '168', '10080', '14400', '43200', '604800'),
	(30, 2, 3, '24.286', '15.2', '86', '116.857', '322.571', '4334'),
	(30, 3, 4, '-164.453 + 164.453i', '-3000.961 + 3000.961i', '-18.991 + 18.991i', '2.828 - 2.828i', '46.467 - 46.467i', '52.892-52.892i'),
	(31, 1, 6, '4', '2', '5.714', '8', '14', '20'),
	(31, 2, 6, '4/3', '-2', '4.19', '8', '18', '34'),
	(31, 3, 6, '1.718e11', '2.749e12', '2.147e10', '2684354555', '2621435', '35'),
	(32, 1, 6, '4', '3', '9', '10', '12', '36'),
	(32, 2, 6, '0.775', '0.613', '1.226', '1.285', '1.387', '2'),
	(32, 3, 1, '1.513', '0.726', '1.625', '1.687', '2.078', '2.1778'),
	(33, 1, 3, '2', '-2', '4', '6', '8', '10'),
	(33, 2, 4, '4', '5/4', '√(10)', '5', '8', '10'),
	(33, 3, 1, 'π/6 and 11π/6', 'π/6 and 5π/6', '5π/6 and 11π/6', '5π/6 and -π/6', 'π/6 and -5π/6', '5π/6 and 11π/6'),
	(34, 1, 1, 'y = -0.25x+3 , 3', 'y = -4x-3 ,     6', 'y = 0.25x - 3 , 7', 'y = 4x+3,      2', 'y = -0.25x-3, 14', 'y = -0.25x'),
	(34, 2, 3, '14', '7', '21', '27', '42', '49'),
	(34, 3, 3, '1', '-13', '8', '14', '21', '27'),
	(35, 1, 5, '-7', '-8', '-6', '0', '1', '7'),
	(35, 2, 5, '-14', '-17', '1', '4', '7', '12'),
	(35, 3, 4, '49', '34', '181', '192', '231', '284'),
	(36, 1, 4, '2/7', '1/7', '5/21', '1/3', '3/7', '2/3'),
	(36, 2, 2, '-5', '-6', '-3', '-2', '5', '6'),
	(36, 3, 2, '-4i√(2)', '-192i', '-i√(2)', 'i√(2)', '4i√(2)', '292i'),
	(37, 1, 5, '35', '17.5', '70', '105', '140', '210'),
	(37, 2, 5, '87.5', '43.75', '175', '262.5', '350', '525'),
	(37, 3, 4, '166', '150', '175', '184', '316', '500'),
	(38, 1, 5, '', '', '', '', '', ''),
	(38, 2, 3, '-3/2', '-3', '28', '82', '92', '100'),
	(38, 3, 5, '-9π/2', '-13π/2', '-5π/2', '5π/2', '9π/2', '13π/2'),
	(39, 1, 4, '2√(6)', '2√(3)', '4√(3)', '4√(6)', '32√(3)', '32√(3)'),
	(39, 2, 4, '.75', '.375', '1.5', '3', '96', '192'),
	(39, 3, 4, '68.203', '62.994', '94.125', '270', '6193884', '49546620'),
	(40, 1, 1, '14√(2)', '11√(2)', '16√(3)', '22', '24√(2)', '32√(3)'),
	(40, 2, 4, '.776', '-.883', '-.174', '0', '.242', '.5'),
	(40, 3, 4, '16', '8', '32', '64', '128', 'Indeterminable');
	");
	//Closes the connection
	print "<p> And now we'll close the connection and be on our way.</p>";
	mysqli_close($con);

	print "<p> You have a wonderful day sir and/or ma'am!</p>";
?>
